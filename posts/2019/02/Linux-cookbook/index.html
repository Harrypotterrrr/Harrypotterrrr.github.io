

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Linux cookbook - Haolin‚Äôs Homepage</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Haolin's Homepage">
<meta property="og:title" content="Linux cookbook">


  <link rel="canonical" href="https://Harrypotterrrr.github.io/posts/2019/02/Linux-cookbook/">
  <meta property="og:url" content="https://Harrypotterrrr.github.io/posts/2019/02/Linux-cookbook/">



  <meta property="og:description" content="This cookbook is built for quick and easy search for commands and deployments of Linux, Pip, Conda, Jupyter, Remote pycharm, Apache">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2019-02-16T00:00:00-08:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Haolin Jia",
      "url" : "https://Harrypotterrrr.github.io",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://Harrypotterrrr.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Haolin's Homepage Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://Harrypotterrrr.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.1.1/katex.min.js"></script>


<link rel="apple-touch-icon" sizes="57x57" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="https://Harrypotterrrr.github.io/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="https://Harrypotterrrr.github.io/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="https://Harrypotterrrr.github.io/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="https://Harrypotterrrr.github.io/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="https://Harrypotterrrr.github.io/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="https://Harrypotterrrr.github.io/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="https://Harrypotterrrr.github.io/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="https://Harrypotterrrr.github.io/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="https://Harrypotterrrr.github.io/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="https://Harrypotterrrr.github.io/assets/css/academicons.css"/>

<!-- For the mathJax rendering -->
<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      processEscapes: true
    },
    TeX: {
      equationNumbers: {
          autoNumber: "none",
          useLabelIds: true
      }
    },
    "HTML-CSS": {
      linebreaks: {
          automatic: true
      },
      scale: 100,
      styles: {
          ".MathJax_Display": {
              "text-align": "left",
              "width": "auto",
              "margin": "10px 0px 10px 0px !important",
              "background-color": "#fafafa !important",
              "border-radius": "3px !important",
              border: "1px solid #ccc !important",
              padding: "5px 5px 5px 5px !important"
          },
          ".MathJax": {
              "background-color": "#fafafa !important",
              padding: "2px 2px 2px 2px !important"
          },
      }
    },
    SVG: {
      scale: 120,
      font: "Tex",
      linebreaks: {
        automatic: true
      }
    }
  });
</script> -->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css" integrity="sha384-dbVIfZGuN1Yq7/1Ocstc1lUEm+AT+/rCkibIcC/OmWo5f0EA48Vf8CytHzGrSwbQ" crossorigin="anonymous">

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://Harrypotterrrr.github.io/">Haolin's Homepage</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://Harrypotterrrr.github.io/year-archive/">Blogs</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://Harrypotterrrr.github.io/cv/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://Harrypotterrrr.github.io/publications/">Publications</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://Harrypotterrrr.github.io/markdown/">Guide</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
	


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="https://Harrypotterrrr.github.io/images/avatar.jfif" class="author__avatar" alt="Haolin Jia">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Haolin Jia</h3>
    <p class="author__bio">Undergraduate in Computer Science. üé®Interested in classical algorithms and techniques related to artificial intelligence.‚òÄÔ∏è</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
        
        <li><a href="/maps/map.html"><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i>Shanghai, China</a></li>
        
        
        
        <li><a href="http://Harrypotterrrr.github.io"><i class="fas fa-link" aria-hidden="true"></i> Website</a></li>
        
        
        <li><a href="mailto:jiahaolin19971119@gmail.com"><i class="fas fa-envelope" aria-hidden="true"></i> Email</a></li>
        
        
        <li><a href="https://github.com/Harrypotterrrr"><i class="fab fa-github" aria-hidden="true"></i> Github</a></li>
        
        
        <li><a href="https://www.linkedin.com/in/haolin-jia-7b4b49173/"><i class="fab fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
        
        <li><a href="https://twitter.com/Harrypotterrrr7"><i class="fab fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
        
        <li><a href="https://www.facebook.com/100012241788050"><i class="fab fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
        
        
        <li><a href="https://music.163.com/#/user/home?id=263691122"><i class="fas fa-podcast" aria-hidden="true"></i> Netease</a></li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </ul>
  </div>
</div>

  
  </div>


	<article class="page" itemscope itemtype="http://schema.org/CreativeWork">
		
		<meta itemprop="headline" content="Linux cookbook">
		
		
		<meta itemprop="description" content="This cookbook is built for quick and easy search for commands and deployments of Linux, Pip, Conda, Jupyter, Remote pycharm, Apache">
		
		
		<meta itemprop="datePublished" content="February 16, 2019">
		
		<meta itemprop="dateModified" content="June 22, 2019">

		<div class="page__inner-wrap">
            
            
			<header>
				<h1 class="page__title" itemprop="headline">
					Linux cookbook
</h1>
				
				<p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  8 minute read
	
</p>
				

				
				<p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i>
						Modified:</strong> <time
						datetime="2019-06-22">June 22, 2019</time>
				</p>
				


				

			</header>
			

			<section class="page__content" itemprop="text">
				<p>This cookbook is built for quick and easy search for commands and deployments of Linux, Pip, Conda, Jupyter, Remote pycharm, Apache
<!--more--></p>

<h2 id="linux">Linux</h2>

<h3 id="commands">Commands</h3>

<ul>
  <li>open HTTP server with specific port</li>
</ul>

<p><code class="highlighter-rouge">python -m SimpleHTTPServer $PORT &amp;</code>
<code class="highlighter-rouge">python -m http.server $PORT</code></p>

<ul>
  <li>Recursively count the number of file under current dirctory, including subdirctory</li>
</ul>

<p><code class="highlighter-rouge">ls -lR | grep "^-"| wc -l</code></p>

<ul>
  <li>get the size of the file</li>
</ul>

<p><code class="highlighter-rouge">du -sh</code>
where <code class="highlighter-rouge">s</code> refers to SUM, and <code class="highlighter-rouge">h</code> refers to be friendly to human to view</p>

<ul>
  <li>display port usage</li>
</ul>

<p><code class="highlighter-rouge">netstat -tunlp | grep $PORT</code></p>

<ul>
  <li>print CUDA version</li>
</ul>

<p><code class="highlighter-rouge">cat /usr/local/cuda/version.txt</code>
<code class="highlighter-rouge">nvcc -V</code></p>

<ul>
  <li>Trash bin path</li>
</ul>

<p><code class="highlighter-rouge">~/.local/share/Trash/files/</code></p>

<ul>
  <li>Look up self public ip</li>
</ul>

<p><code class="highlighter-rouge">curl cip.cc</code></p>

<ul>
  <li>look up public ip of the domain address</li>
</ul>

<p><code class="highlighter-rouge">nslookup $DOMAIN_ADDRESS</code></p>

<ul>
  <li>count the number of line of files</li>
</ul>

<p><code class="highlighter-rouge">wc -l $FILE_NAME</code></p>

<ul>
  <li>change access permission</li>
</ul>

<p><code class="highlighter-rouge">chmod [Option] [ugoa][+-=][rwx] $FILE_NAME</code></p>

<p>Option: -R recursive</p>

<table>
  <thead>
    <tr>
      <th>User</th>
      <th>letter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>The user who owns it</td>
      <td>u</td>
    </tr>
    <tr>
      <td>Other users in the file‚Äôs Group</td>
      <td>g</td>
    </tr>
    <tr>
      <td>Other users not in the file‚Äôs group</td>
      <td>o</td>
    </tr>
    <tr>
      <td>All users</td>
      <td>a</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>Permission</th>
      <th>letter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Read</td>
      <td>r</td>
    </tr>
    <tr>
      <td>Write</td>
      <td>w</td>
    </tr>
    <tr>
      <td>Execute (or access for directories)</td>
      <td>x</td>
    </tr>
  </tbody>
</table>

<h3 id="bashrc-file">.bashrc file</h3>

<ul>
  <li><code class="highlighter-rouge">:</code> is to segregate the <code class="highlighter-rouge">PATH</code></li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nv">$PATH</span>
<span class="o">&gt;&gt;</span> /home/jiahl/code-server/:/home/jiahl/.linuxbrew/bin
</code></pre></div></div>

<ul>
  <li>append local executable file to environment variable</li>
</ul>

<p><code class="highlighter-rouge">~/.bashrc</code> is a file to store <code class="highlighter-rouge">alias</code>, <code class="highlighter-rouge">path</code> etc.</p>

<p>For example, after appending the following to the <code class="highlighter-rouge">.bashrc</code> file, everything executable can be executed in any directory.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">CODE_SERVER_PATH</span><span class="o">=</span>/home/jiahl/code-server/
<span class="nv">PATH</span><span class="o">=</span><span class="nv">$CODE_SERVER_PATH</span>:<span class="nv">$PATH</span>
<span class="nb">export </span>CODE_SERVER_PATH PATH
</code></pre></div></div>

<p><strong>Note that</strong> using <code class="highlighter-rouge">source ~/.bashrc</code> to make bash resource file effect.</p>

<ul>
  <li><code class="highlighter-rouge">-x</code> make <code class="highlighter-rouge">.sh</code> file executable</li>
</ul>

<p>Generally, <code class="highlighter-rouge">.sh</code> file is not executable execept its mode has been changed:</p>

<p><code class="highlighter-rouge">chmod a+x &lt;FILE_NAME&gt;.sh</code></p>

<h2 id="ruby">Ruby</h2>

<h3 id="installation">Installation</h3>

<p>To install the ruby <strong>without privilege of root</strong>, the third-party package <code class="highlighter-rouge">RVM</code> is strongly suggested. <a href="https://blog.codeminer42.com/4-5-ways-to-install-ruby-in-userspace-d26b0ba43610">reference link</a></p>

<ul>
  <li>using RVM</li>
</ul>

<p>RVM installer script uses GPG to check signatures; because of that, the first thing to do is to download the gpg key</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--keyserver</span> hkp://keys.gnupg.net <span class="nt">--recv-keys</span> 409B6B1796C275462A1703113804BB82D39DC0E3
</code></pre></div></div>

<p>then download and execute the script from https://get.rvm.io:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-sSL</span> https://get.rvm.io | bash <span class="nt">-s</span> stable
</code></pre></div></div>

<p>source the file</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.rvm/scripts/rvm
</code></pre></div></div>

<p><strong>disable RVM from trying to install necessary software via apt-get</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rvm autolibs disable
</code></pre></div></div>

<p>get the listt of known Ruby versions</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rvm list known
</code></pre></div></div>

<p>install the latest, eg:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rvm install 2.6.3
</code></pre></div></div>

<h2 id="shell">Shell</h2>

<ul>
  <li><strong>leave no space</strong></li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>STR <span class="o">=</span> <span class="s2">"foo"</span> <span class="c"># wrong</span>
<span class="nv">STR</span><span class="o">=</span><span class="s2">"foo"</span> 	<span class="c"># correct</span>
</code></pre></div></div>

<ul>
  <li>use ```` or <code class="highlighter-rouge">$()</code> to assign a command</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">DIRS</span><span class="o">=</span><span class="k">$(</span>find <span class="nb">.</span> <span class="k">*</span> <span class="nt">-type</span> d | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"</span><span class="se">\.</span><span class="s2">"</span><span class="k">)</span>
<span class="nb">echo</span> <span class="k">${</span><span class="nv">DIRS</span><span class="k">}</span>
</code></pre></div></div>

<ul>
  <li>calculate and loop</li>
</ul>

<p><strong><code class="highlighter-rouge">assign</code> must not leave space</strong>
<strong><code class="highlighter-rouge">expr</code> must leave space</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">a</span><span class="o">=</span>1 <span class="c"># no space</span>
<span class="k">for </span>i <span class="k">in</span> <span class="k">$(</span>seq 1 2 20<span class="k">)</span>
<span class="k">do
	</span><span class="nv">a</span><span class="o">=</span><span class="sb">`</span>expr <span class="k">${</span><span class="nv">a</span><span class="k">}</span> + 1<span class="sb">`</span>
    <span class="nb">echo</span> <span class="s2">"Welcome </span><span class="nv">$i</span><span class="s2"> times"</span>
    <span class="nb">echo</span> <span class="s2">"a = </span><span class="nv">$a</span><span class="s2">"</span>
<span class="k">done</span>
</code></pre></div></div>
<p>output:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sh clear.sh
Welcome 1 times
a = 2
Welcome 3 times
a = 3
Welcome 5 times
a = 4
Welcome 7 times
a = 5
Welcome 9 times
a = 6
</code></pre></div></div>

<h2 id="pip">Pip</h2>

<ul>
  <li>pip accelerate</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple $PACKAGE
</code></pre></div></div>

<ul>
  <li>pip ungrade package</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install $PACKAGE --upgrade
</code></pre></div></div>

<h2 id="conda">Conda</h2>

<ul>
  <li>check all envs</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda info -e
</code></pre></div></div>

<ul>
  <li>create the env</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda create -n xxxx 
</code></pre></div></div>

<ul>
  <li>create and clone the env</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda create -n xxxx1 --clone xxxx2
</code></pre></div></div>

<ul>
  <li>remove the env</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda remove -n xxxxx --all
</code></pre></div></div>

<ul>
  <li>activate the env</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source activate xxxx
</code></pre></div></div>

<ul>
  <li>deactivate the env</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source deactivate xxxx
</code></pre></div></div>

<p>reference: https://blog.csdn.net/menc15/article/details/71477949</p>

<h2 id="jupyter">Jupyter</h2>

<ul>
  <li>convert *.ipynb to .py</li>
</ul>

<p><code class="highlighter-rouge">jupyter nbconvert --to script *.ipynb</code></p>

<ul>
  <li>start the jupyter with specific port</li>
</ul>

<p><code class="highlighter-rouge">nohup jupyter notebook --port=7141 --ip=0.0.0.0 --allow-root --notebook-dir='~/' &amp;</code></p>

<ul>
  <li>create a passowrd to avoid using TOKEN to log in</li>
</ul>

<p>check if the config file exists or not</p>

<p><code class="highlighter-rouge">jupyter notebook --generate-config</code></p>

<p>generate password</p>

<p><code class="highlighter-rouge">jupyter notebook password</code></p>

<p class="notice--warning"><strong>Warning:</strong> Starting the notebook server before setting up the password</p>

<p class="notice--info"><strong>Info:</strong> After using this way to creat a port, <code class="highlighter-rouge">jupyter notebook stop</code> command is usually invalid, therefore <code class="highlighter-rouge">kill</code> is commended</p>

<ul>
  <li>stop the jupyter with specific port</li>
</ul>

<p><code class="highlighter-rouge">jupyter notebook stop $PORT</code> where PORT is the port got to stop</p>

<ul>
  <li>insert true tabs in jupyter editor/notebook</li>
</ul>

<p><code class="highlighter-rouge">jupyter --config-dir</code> to create config file for user</p>

<p>then create <code class="highlighter-rouge">~/.jupyter/nbconfig/edit.json</code>:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "Editor": {
        "codemirror_options": {
            "indentWithTabs": true
        }
    }
}
</code></pre></div></div>

<p>And create <code class="highlighter-rouge">~/.jupyter/nbconfig/notebook.json</code> with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "CodeCell": {
        "cm_config": {
            "indentWithTabs": 2
        }
    }
}
</code></pre></div></div>

<ul>
  <li>add conda env</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m ipykernel install --user --name $ENV_NAME --display-name "$DISPLAY_NAME"
</code></pre></div></div>

<ul>
  <li>remove conda env</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupyter kernelspec remove $ENV_NAME
</code></pre></div></div>

<ul>
  <li>import technique</li>
</ul>

<p>working directory:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WorkingDirectory--
                 |--MyPackage--
                 |            |--__init__.py
                 |            |--module1.py
                 |            |--module2.py
                 |
                 |--notebook.ipynb
</code></pre></div></div>
<p>In <code class="highlighter-rouge">__init__.py</code>,</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">module1</span>
<span class="kn">import</span> <span class="nn">module2</span>
</code></pre></div></div>
<p>In <code class="highlighter-rouge">notebook.ipynb</code>,</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span><span class="p">,</span> <span class="n">os</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>

<span class="kn">import</span> <span class="nn">MyPackage.modeul1</span>
</code></pre></div></div>

<p><strong>Note that</strong> there are several reason for <code class="highlighter-rouge">No module named 'XXXX'</code>, one is that <code class="highlighter-rouge">packages</code> of <code class="highlighter-rouge">.py</code> must be in one <code class="highlighter-rouge">utility directory</code>, 
and <code class="highlighter-rouge">init file</code> of the package must be built in previous. Another is that <code class="highlighter-rouge">current working directory(cwd)</code> must be appended to <code class="highlighter-rouge">system path</code></p>

<h2 id="virtualenv">Virtualenv</h2>

<ul>
  <li>create virtual environment</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>virtualenv &lt;env_name&gt;
</code></pre></div></div>

<ul>
  <li>activate the virtualenv</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> &lt;env_name&gt;/bin/activate
</code></pre></div></div>

<ul>
  <li>deactivate the virtualenv</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deactivate
</code></pre></div></div>

<h2 id="remote-pycharm">Remote pycharm</h2>

<ul>
  <li>import tf error</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'LD_LIBRARY_PATH'</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
</code></pre></div></div>

<p>add path of output to env variable in configuration</p>

<h2 id="shadowsocks">Shadowsocks</h2>

<h3 id="server">Server</h3>

<ul>
  <li>install on Ubuntu</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get install python-pip python-setuptools
pip install git+https://github.com/shadowsocks/shadowsocks.git@master
</code></pre></div></div>

<ul>
  <li>run in the background</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssserver -p $PORT -k $PASSWORD -m aes-256-cfb --user nobody -d start
</code></pre></div></div>
<p>where PORT and PASSWORD are refered to the ones of the server.</p>

<ul>
  <li>stop the ss</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssserver -d stop
</code></pre></div></div>

<ul>
  <li>check the log</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>less /var/log/shadowsocks.log
</code></pre></div></div>

<h3 id="client">Client</h3>

<p>For linux operating system:</p>

<ul>
  <li>create <code class="highlighter-rouge">SOCKS5</code> proxy</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nohup sslocal <span class="nt">-s</span> <span class="nv">$IP</span> <span class="nt">-p</span> <span class="nv">$SERVER_PORT</span> <span class="nt">-k</span> <span class="s2">"</span><span class="nv">$PASSWORD</span><span class="s2">"</span> <span class="nt">-l</span> <span class="nv">$CLIENT_PORT</span> <span class="o">[</span><span class="nt">-d</span> 0.0.0.0] <span class="nt">-t</span> 600 <span class="nt">-m</span> aes-256-cfb &amp;
</code></pre></div></div>
<p><a id="sslocal"></a></p>

<p>where <code class="highlighter-rouge">$SERVER_IP</code> and <code class="highlighter-rouge">$PASSWORD</code> are refered to the ones of the server and <code class="highlighter-rouge">$CLIENT_PORT</code> is refered to the one of the client.</p>

<p class="notice--danger"><strong>Note that</strong> different from <code class="highlighter-rouge">vpn</code> global proxy,<code class="highlighter-rouge">sslocal</code>(shadowsocks on linux) creates a tunnel of <code class="highlighter-rouge">SOCKS5</code> proxy and only works for browsers rather than running files or applications such as <code class="highlighter-rouge">curl</code>, <code class="highlighter-rouge">wget</code> or any other commands in bash.</p>

<p>There are two ways to hook calls from local programs to sockets and redirect it through one or more socks/http proxies.</p>

<ol>
  <li>
    <p>Use <code class="highlighter-rouge">proxychains4</code> to force applications to go through <code class="highlighter-rouge">SOCKS5</code> proxy. <a href="#Proxychains">link</a></p>
  </li>
  <li>
    <p>Use <code class="highlighter-rouge">privoxy</code> to convert <code class="highlighter-rouge">SOCKS5</code> into <code class="highlighter-rouge">HTTP</code> proxy, and support program using it by exporting the environment variable. <a href="https://blog.liuguofeng.com/p/4010">link</a> <strong>TO BE DONE BY SELF</strong></p>
  </li>
</ol>

<ul>
  <li>check running status</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl status rc-local.service
</code></pre></div></div>

<ul>
  <li>use shadowsockssr JSON config file to run</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/shadowsocksrr/shadowsocksr
vim config.json
cd shadowsocks/
./local.py -c ../config.json
</code></pre></div></div>

<h2 id="proxychains">Proxychains</h2>

<p>Here I demonstrate to download a large file from google drive.</p>

<h3 id="preliminaries">Preliminaries</h3>

<ul>
  <li>installation</li>
</ul>

<p>For the non-root user of the server, using <code class="highlighter-rouge">Linuxbrew</code> to install it is recommended</p>

<p><code class="highlighter-rouge">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code></p>

<ul>
  <li>modify the config file</li>
</ul>

<p><code class="highlighter-rouge">vim ~/.linuxbrew/etc/proxychains.conf</code></p>

<p>change the last line of the config file to your specified port with <code class="highlighter-rouge">SOCKS5</code>, e.g. <code class="highlighter-rouge">socks5  127.0.0.1 $LOCAL_PORT</code></p>

<p>where the <code class="highlighter-rouge">$LOCAL_PORT</code> is same to the one in <code class="highlighter-rouge">SOCKS5</code> creating command as <code class="highlighter-rouge">sslocal ... $CLIENT_PORT</code> <a href="#sslocal">link</a></p>

<h3 id="test">Test</h3>

<p>Comparing <code class="highlighter-rouge">curl google.com</code> to <code class="highlighter-rouge">proxychains4 curl google.com</code></p>

<h3 id="fetching-file">Fetching file</h3>

<p>Each file shared on Google drive has a unique id (<code class="highlighter-rouge">$FILE_ID</code>), like <code class="highlighter-rouge">1UFaRl_3EGK0hSBlmB6AJVeZZ_r-SHQLm</code> in <code class="highlighter-rouge">https://drive.google.com/uc?id=1UFaRl_3EGK0hSBlmB6AJVeZZ_r-SHQLm&amp;export=download</code></p>

<p>There are two ways to download it</p>

<ul>
  <li>By <code class="highlighter-rouge">wget</code> command (Recommand)</li>
</ul>

<p>append proxychains4 as the prefix to any commands</p>

<p><code class="highlighter-rouge">proxychains4 wget --no-check-certificate -r 'https://docs.google.com/uc?export=download&amp;id=$FILE_ID' -O $FILE_NAME</code></p>

<p>where <code class="highlighter-rouge">$FILE_ID</code> is an identifier to the shared file, and <code class="highlighter-rouge">$FILE_NAME</code> is the name of the output file.</p>

<p><strong>Note that</strong> <code class="highlighter-rouge">-r</code> is crucial and decide <code class="highlighter-rouge">wget</code> in recursive mode.</p>

<ul>
  <li>By <code class="highlighter-rouge">gdrive.sh</code> script</li>
</ul>

<p><code class="highlighter-rouge">proxychains4 curl gdrive.sh | proxychains4 bash -s $FILE_ID</code></p>

<p>This solution is <strong>unstable</strong> in some cases, the above $FILE_ID mentioned is a case.</p>

<h2 id="apache">Apache</h2>

<h3 id="installation-1">installation</h3>

<ul>
  <li>install the apache package</li>
</ul>

<p><code class="highlighter-rouge">apt install apache2</code></p>

<ul>
  <li>adjust the firewall, check the available ufw application profiles</li>
</ul>

<p><code class="highlighter-rouge">ufw app list</code></p>

<ul>
  <li>Check your Web Server, Check with the systemd init system to make sure the service is running by typing:</li>
</ul>

<p><code class="highlighter-rouge">systemctl status apache2</code></p>

<h3 id="config-your-own-indexhtml">config your own index.html</h3>

<ul>
  <li>build an index.html file in anywhere, take ‚Äò/home/test_html/‚Äô as an example</li>
</ul>

<p><code class="highlighter-rouge">vim /home/test_html/index.html</code></p>

<p>add the below in the file</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;body&gt;</span>
  Hello world!
<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>

<ul>
  <li>append the specified path to the virtualHost statement</li>
</ul>

<p><code class="highlighter-rouge">vim /etc/apache2/sites-available/000-default.conf</code></p>

<p>modify the listen port into <code class="highlighter-rouge">7146</code> in the first line as an example</p>

<p><code class="highlighter-rouge">&lt;VirtualHost *:7146&gt;</code></p>

<p>change the virtualHost root to the specified path in <code class="highlighter-rouge">DocumentRoot</code></p>

<p>for the above example, we modify the below,</p>

<p><code class="highlighter-rouge">DocumentRoot /home/test_html</code></p>

<ul>
  <li>config the port.conf to add listen port</li>
</ul>

<p><code class="highlighter-rouge">vim /etc/apache2/ports.conf</code></p>

<p>then add Listen ports into the config file</p>

<ul>
  <li>modify the main config file to add your own web file</li>
</ul>

<p>for the default security mode, apache doesn‚Äôt allow access outside of <code class="highlighter-rouge">/usr/share</code> and <code class="highlighter-rouge">/var/www</code>.</p>

<p>therefore we should add an item to allow the specified path to be accessed.</p>

<p><code class="highlighter-rouge">vim /etc/apache2/apache2.conf</code></p>

<p>for the above example, we add the below,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Directory /home/test_html/&gt;
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
&lt;/Directory&gt;
</code></pre></div></div>

<ul>
  <li>then restart the apache service after modify any config files</li>
</ul>

<p><code class="highlighter-rouge">systemctl restart apache2</code></p>

<ul>
  <li>view apache log, if there is something wrong</li>
</ul>

<p><code class="highlighter-rouge">tail -f /var/log/apache2/error.log</code></p>


				
            </section>
            
            
            <aside class="sidebar__right ">
                <nav class="toc">
                    <header>
                        <h4 class="nav__title">
                            <i class="fas fa-file-alt"></i>
                            Content
                        </h4>
                    </header>
                    <ul class="toc__menu">
  <li><a href="#linux">Linux</a>
    <ul>
      <li><a href="#commands">Commands</a></li>
      <li><a href="#bashrc-file">.bashrc file</a></li>
    </ul>
  </li>
  <li><a href="#ruby">Ruby</a>
    <ul>
      <li><a href="#installation">Installation</a></li>
    </ul>
  </li>
  <li><a href="#shell">Shell</a></li>
  <li><a href="#pip">Pip</a></li>
  <li><a href="#conda">Conda</a></li>
  <li><a href="#jupyter">Jupyter</a></li>
  <li><a href="#virtualenv">Virtualenv</a></li>
  <li><a href="#remote-pycharm">Remote pycharm</a></li>
  <li><a href="#shadowsocks">Shadowsocks</a>
    <ul>
      <li><a href="#server">Server</a></li>
      <li><a href="#client">Client</a></li>
    </ul>
  </li>
  <li><a href="#proxychains">Proxychains</a>
    <ul>
      <li><a href="#preliminaries">Preliminaries</a></li>
      <li><a href="#test">Test</a></li>
      <li><a href="#fetching-file">Fetching file</a></li>
    </ul>
  </li>
  <li><a href="#apache">Apache</a>
    <ul>
      <li><a href="#installation-1">installation</a></li>
      <li><a href="#config-your-own-indexhtml">config your own index.html</a></li>
    </ul>
  </li>
</ul>
                </nav>
            </aside>
            

			<footer class="page__meta">
				
				


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://Harrypotterrrr.github.io/tags/#cookbook" class="page__taxonomy-item" rel="tag">cookbook</a>
    
    </span>
  </p>




			</footer>

			

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=https://Harrypotterrrr.github.io/posts/2019/02/Linux-cookbook/" class="btn btn--twitter" title="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://Harrypotterrrr.github.io/posts/2019/02/Linux-cookbook/" class="btn btn--facebook" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://Harrypotterrrr.github.io/posts/2019/02/Linux-cookbook/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

			


  <nav class="pagination">
    
      <a href="https://Harrypotterrrr.github.io/posts/2019/02/Git-cookbook/" class="pagination--pager" title="Git cookbook
">Previous</a>
    
    
      <a href="https://Harrypotterrrr.github.io/posts/2019/05/text_to_image_1/" class="pagination--pager" title="Generative Adversarial Text to Image Synthesis
">Next</a>
    
  </nav>

		</div>

		
	</article>

	

	
		<div class="page__related">
			
			<h4 class="page__related-title">
				You May Also Enjoy
			</h4>
			
			<div class="grid__wrapper">
				
				





<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    

    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://Harrypotterrrr.github.io/posts/2012/08/blog-post-4/" rel="permalink">Future Blog Post
</a>
      
    </h2>
    
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  less than 1 minute read
	
</p>
    

        

    
    <p class="archive__item-excerpt" itemprop="description"><p>This post will show up by default. To disable scheduling of future posts, edit <code class="highlighter-rouge">config.yml</code> and set <code class="highlighter-rouge">future: false</code>.</p>
</p>
    
    
    

  </article>
</div>

				
				





<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    

    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://Harrypotterrrr.github.io/posts/2019/08/Vim-cookbook/" rel="permalink">Vim cookbook
</a>
      
    </h2>
    
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  6 minute read
	
</p>
    

        
		<p class="page__date">
			<strong>
				<i class="fa fa-fw fa-calendar" aria-hidden="true"></i>
				Modified:
			</strong> 
			<time datetime="2019-08-03T00:00:00-07:00"> 
				August 03, 2019
			</time>
		</p>  
        

    
    <p class="archive__item-excerpt" itemprop="description"><p>This is a cheatsheet for vim commands and operations.</p>

</p>
    
    
    

  </article>
</div>

				
				





<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    

    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://Harrypotterrrr.github.io/posts/2019/07/objGAN/" rel="permalink">Object-driven Text-to-Image Synthesis via Adversarial Training
</a>
      
    </h2>
    
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  less than 1 minute read
	
</p>
    

        
		<p class="page__date">
			<strong>
				<i class="fa fa-fw fa-calendar" aria-hidden="true"></i>
				Modified:
			</strong> 
			<time datetime="2019-07-16T00:00:00-07:00"> 
				July 16, 2019
			</time>
		</p>  
        

    
    <p class="archive__item-excerpt" itemprop="description"><p>The note of <a href="https://arxiv.org/abs/1902.10740"><em>Object-driven Text-to-Image Synthesis via Adversarial Training</em></a></p>

</p>
    
    
    

  </article>
</div>

				
				





<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    

    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://Harrypotterrrr.github.io/posts/2019/07/storyGAN/" rel="permalink">StoryGAN: A Sequential Conditional GAN for Story Visualization
</a>
      
    </h2>
    
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  5 minute read
	
</p>
    

        
		<p class="page__date">
			<strong>
				<i class="fa fa-fw fa-calendar" aria-hidden="true"></i>
				Modified:
			</strong> 
			<time datetime="2019-07-14T00:00:00-07:00"> 
				July 14, 2019
			</time>
		</p>  
        

    
    <p class="archive__item-excerpt" itemprop="description"><p>The note of <a href="https://arxiv.org/abs/1812.02784"><em>StoryGAN: A Sequential Conditional GAN for Story Visualization</em></a></p>

</p>
    
    
    

  </article>
</div>

				
			</div>
		</div>
	
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<!-- <a href="/sitemap/">Sitemap</a> -->

<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/Harrypotterrrr"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://Harrypotterrrr.github.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Haolin Jia. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
      <script type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=243&t=n&d=qOXeHp0OGGl8hNUWgl974rBjv8tmDtApaSsfA6pK-3Q&co=2d78ad&ct=ffffff&cmo=3acc3a&cmn=ff5353">
      </script>
    </div>

    <script src="https://Harrypotterrrr.github.io/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

